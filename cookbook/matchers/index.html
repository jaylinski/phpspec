<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><base href=https://jaylinski.github.io/phpspec/><title>&#8212; phpspec v6.1</title><link rel=alternate hreflang=en href=https://jaylinski.github.io/phpspec/cookbook/matchers/><link rel=icon href=https://jaylinski.github.io/phpspec/favicon.ico type=image/x-icon><style type=text/css integrity="sha256-cts4rw/maJyIcTvOOrsurOfkCBnUDGifbpTOxmz8Jd4=">*,*::before,*::after{box-sizing:border-box}ul[class],ol[class]{padding:0}body,h1,h2,h3,h4,p,ul[class],ol[class],li,figure,figcaption,blockquote,dl,dd{margin:0}body{min-height:100vh;scroll-behavior:smooth;text-rendering:optimizeSpeed;line-height:1.5}ul[class],ol[class]{list-style:none}a:not([class]){text-decoration-skip-ink:auto}img{max-width:100%;display:block}article>*+*{margin-top:1em}input,button,textarea,select{font:inherit}@media(prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}body{color:#414141;font-family:trebuchet ms,serif;background:#fff url(./images/bg.jpg)repeat-x;margin:0}a{color:#111}a:hover{text-decoration:none}h1,h2,h3{color:#333;font-style:italic}h1{font-size:30px;margin-bottom:.8em}h2{font-size:26px;margin-top:.8em;margin-bottom:.6em}p{font-size:15px;line-height:20px;margin-bottom:1em}pre{overflow:auto}table{border-collapse:collapse}table td,table th{border:1px solid rgba(0,0,0,.4);padding:4px 8px;text-align:left}section{max-width:840px;overflow:auto;margin:0 auto;padding:0 15px}main{margin-bottom:5em}footer{color:#777;border-top:1px solid #ccc}footer ul{list-style:none;padding:0}footer a{color:inherit}.nav-main{display:flex;justify-content:space-between;border-bottom:1px solid #c4c4c4;margin:10px 0 2em}.nav-main a{display:block;border-top:5px solid #727272;width:160px;padding:8px 0 10px;text-decoration:none;text-align:center}.nav-main a:hover{border-top-color:#fff}.nav-main ul{display:flex;list-style:none;padding:0}.nav-main .nav-active{color:#000;border-top-color:#000}.highlight pre{border-radius:5px;padding:12px 14px}.home{text-align:center;margin:4em 0}.home img{display:inline}.home h1{color:#4f4f4f;line-height:48px;margin-top:2em}.home h1 em{color:#111}.quickstart{border-top:1px solid #ccc;padding-top:2em}</style></head><body><section><nav class=nav-main><ul class=nav-item-main><li><a href=/phpspec/>main</a></li><li><a href=/phpspec/manual/introduction/>phpspec manual</a></li></ul><ul class=nav-item-github><li><a href=https://www.github.com/phpspec/phpspec target=_blank>phpspec repo</a></li><li><a href=https://www.github.com/phpspec/prophecy target=_blank>prophecy repo</a></li></ul></nav><main><h1></h1><h1 id=matchers>Matchers</h1><p>You use matchers in <strong>phpspec</strong> to describe how an object should behave.
They are like assertions in xUnit but with a focus on specifying
behaviour instead of verifying output. You use the matchers prefixed by
<code>should</code> or <code>shouldNot</code> as appropriate.</p><p><strong>phpspec</strong> has 14 built-in matchers, described in more detail here.
Many of these matchers have aliases which you can use to make your
specifications easy to read.</p><p>Custom matchers classes can be registered in
configuration&lt;cookbook/configuration>.</p><h2 id=identity-matcher>Identity Matcher</h2><p>If you want to specify that a method returns a specific value, you can
use the Identity matcher. It compares the result using the identity
operator: <code>===</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_be_a_great_movie</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRating</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBe</span>(<span style=color:#ae81ff>5</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTitle</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeEqualTo</span>(<span style=color:#e6db74>&#34;Star Wars&#34;</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getReleaseDate</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldReturn</span>(<span style=color:#ae81ff>233366400</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getDescription</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldEqual</span>(<span style=color:#e6db74>&#34;Inexplicably popular children&#39;s film&#34;</span>);
    }
}
</code></pre></div><p>All four of these ways of using the Identity matcher are equivalent.
There is no difference in how they work, this lets you choose the one
which makes your specification easier to read.</p><h2 id=comparison-matcher>Comparison Matcher</h2><p>The Comparison matcher is like the Identity matcher. The difference is
that is uses the comparison operator <code>==</code>. So it is not as strict and
follows the PHP rules for loose type comparison.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_be_a_great_movie</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRating</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeLike</span>(<span style=color:#e6db74>&#39;5&#39;</span>);
    }
}
</code></pre></div><p>Using <code>shouldBeLike</code> it does not matter whether <code>StarWars::getRating()</code>
returns an integer or a string. The spec will pass for 5 and &ldquo;5&rdquo;.</p><h2 id=approximately-matcher>Approximately Matcher</h2><p>If you want to specify that a method returns a value that approximates
to a certain precision the given value, you can use the Approximately
matcher.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_return_a_near_value</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRating</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeApproximately</span>(<span style=color:#ae81ff>1.444447777</span>, <span style=color:#ae81ff>1.0e-9</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRating</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeEqualToApproximately</span>(<span style=color:#ae81ff>1.444447777</span>, <span style=color:#ae81ff>1.0e-9</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRating</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldEqualApproximately</span>(<span style=color:#ae81ff>1.444447777</span>, <span style=color:#ae81ff>1.0e-9</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getRating</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldReturnApproximately</span>(<span style=color:#ae81ff>1.444447777</span>, <span style=color:#ae81ff>1.0e-9</span>);
    }
}
</code></pre></div><p>The first argument is the value we expect, the second is the delta.</p><p>All four of these ways of using the Approximately matcher are
equivalent. There is no difference in how they work, this lets you
choose the one which makes your specification easier to read.</p><h2 id=throw-matcher>Throw Matcher</h2><p>You can describe an object throwing an exception using the Throw
matcher. You use the Throw matcher by calling it straight from <code>$this</code>,
making the example easier to read.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_not_allow_negative_ratings</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldThrow</span>(<span style=color:#e6db74>&#39;\InvalidArgumentException&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>duringSetRating</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>);
    }
}
</code></pre></div><p>You can also write this as:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_not_allow_negative_ratings</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldThrow</span>(<span style=color:#e6db74>&#39;\InvalidArgumentException&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>during</span>(<span style=color:#e6db74>&#39;setRating&#39;</span>, <span style=color:#66d9ef>array</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>));
    }
}
</code></pre></div><p>The first argument of <code>during</code> is the method name and the second one is
an array of values passed to the method.</p><p>You may want to specify the message of the exception. You can do this by
passing an exception object to shouldThrow:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_not_allow_negative_ratings</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldThrow</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\InvalidArgumentException</span>(<span style=color:#e6db74>&#34;Invalid rating&#34;</span>))<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>during</span>(<span style=color:#e6db74>&#39;setRating&#39;</span>, <span style=color:#66d9ef>array</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>));
    }
}
</code></pre></div><p>If you want to use the Throw matcher to check for exceptions thrown
during object instantiation you can use the <code>duringInstantiation</code>
method.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_not_allow_negative_ratings</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>beConstructedWith</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldThrow</span>(<span style=color:#e6db74>&#39;\InvalidArgumentException&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>duringInstantiation</span>();
    }
}
</code></pre></div><p>You can also use the Throw matcher with named constructors.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_not_allow_negative_ratings</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>beConstructedThrough</span>(<span style=color:#e6db74>&#39;rated&#39;</span>, <span style=color:#66d9ef>array</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span>));
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldThrow</span>(<span style=color:#e6db74>&#39;\InvalidArgumentException&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>duringInstantiation</span>();
    }
}
</code></pre></div><h2 id=trigger-matcher>Trigger Matcher</h2><p>Let&rsquo;s say you have the following class and a method which is deprecated</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Movie</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setStars</span>($value)
    {
        <span style=color:#a6e22e>trigger_error</span>(<span style=color:#e6db74>&#39;The method setStars is deprecated. Use setRating instead&#39;</span>, <span style=color:#a6e22e>E_USER_DEPRECATED</span>);

        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rating</span> <span style=color:#f92672>=</span> $value <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
    }
}
</code></pre></div><p>You can describe an object triggering an error using the Trigger
matcher. You use the Trigger matcher by calling it straight from
<code>$this</code>, making the example easier to read.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>set_stars_should_be_deprecated</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldTrigger</span>(<span style=color:#a6e22e>E_USER_DEPRECATED</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>duringSetStars</span>(<span style=color:#ae81ff>4</span>);
    }
}
</code></pre></div><p>You may want to specify the message of the error. You can do this by
adding a string parameter to the shouldTrigger method :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>set_stars_should_be_deprecated</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldTrigger</span>(<span style=color:#a6e22e>E_USER_DEPRECATED</span>, <span style=color:#e6db74>&#39;The method setStars is deprecated. Use setRating instead&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>duringSetRating</span>(<span style=color:#ae81ff>4</span>);
    }
}
</code></pre></div><p>As with the Throw matcher, you can also use the during syntax described
in the Throw section, or use the instantiation mechanisms (such as
duringInstantiation, &mldr; etc)</p><h2 id=type-matcher>Type Matcher</h2><p>You can specify the type of the object you are describing with the Type
matcher. You can also use this matcher to check that a class implements
an interface or that it extends a class.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_be_a_movie</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveType</span>(<span style=color:#e6db74>&#39;Movie&#39;</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldReturnAnInstanceOf</span>(<span style=color:#e6db74>&#39;Movie&#39;</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeAnInstanceOf</span>(<span style=color:#e6db74>&#39;Movie&#39;</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldImplement</span>(<span style=color:#e6db74>&#39;Movie&#39;</span>);
    }
}
</code></pre></div><p>All four matcher methods are equivalent and will serve to describe if
the object is a <code>Movie</code> or not.</p><h2 id=objectstate-matcher>ObjectState Matcher</h2><p>The ObjectState matcher lets you check the state of an object by calling
methods on it. These methods should start with <code>is*</code> or <code>has*</code> and
return a boolean.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_be_available_on_cinemas</span>()
    {
        <span style=color:#75715e>// calls isAvailableOnCinemas()
</span><span style=color:#75715e></span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeAvailableOnCinemas</span>();
    }

    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_soundtrack</span>()
    {
        <span style=color:#75715e>// calls hasSoundtrack()
</span><span style=color:#75715e></span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveSoundtrack</span>();
    }
}
</code></pre></div><p>The spec will pass if the object has <code>isAvailableOnCinemas</code> and
<code>hasSoundtrack</code> methods which both return true:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Movie</span>
{
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isAvailableOnCinemas</span>()
    {
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>hasSoundtrack</span>()
    {
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
    }
}
</code></pre></div><h2 id=count-matcher>Count Matcher</h2><p>You can check the number of items in the return value using the Count
matcher. The returned value could be an array or an object that
implements the <code>\Countable</code> or <code>\Traversable</code> interface.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_one_director</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getDirectors</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveCount</span>(<span style=color:#ae81ff>1</span>);
    }
}
</code></pre></div><h2 id=scalar-matcher>Scalar Matcher</h2><p>To specify that the value returned by a method should be a specific
primitive type you can use the Scalar matcher. It&rsquo;s like using one of
the <code>is_*</code> functions, e.g, <code>is_bool</code>, <code>is_integer</code>, <code>is_float</code>, etc.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_a_string_as_title</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTitle</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeString</span>();
    }

    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_an_array_as_cast</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldBeArray</span>();
    }
}
</code></pre></div><h2 id=iterablecontain-matcher>IterableContain Matcher</h2><p>You can specify that a method should return an array or an implementor
of <code>\Traversable</code> that contains a given value with the IterableContain
matcher. <strong>phpspec</strong> matches the value by identity (<code>===</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_contain_jane_smith_in_the_cast</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldContain</span>(<span style=color:#e6db74>&#39;Jane Smith&#39;</span>);
    }
}
</code></pre></div><h2 id=iterablekeywithvalue-matcher>IterableKeyWithValue Matcher</h2><p>This matcher lets you assert a specific value for a specific key on a
method that returns an array or an implementor of <code>\ArrayAccess</code> or
<code>\Traversable</code>. <strong>phpspec</strong> matches both the key and value by identity
(<code>===</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_jane_smith_in_the_cast_with_a_lead_role</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveKeyWithValue</span>(<span style=color:#e6db74>&#39;leadRole&#39;</span>, <span style=color:#e6db74>&#39;John Smith&#39;</span>);
    }
}
</code></pre></div><h2 id=iterablekey-matcher>IterableKey Matcher</h2><p>You can specify that a method should return an array or an object
implementing <code>\ArrayAccess</code> or <code>\Traversable</code> with a specific key using
the IterableKey matcher. <strong>phpspec</strong> matches the key by identity
(<code>===</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_a_release_date_for_france</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getReleaseDates</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveKey</span>(<span style=color:#e6db74>&#39;France&#39;</span>);
    }
}
</code></pre></div><h2 id=iterateas-matcher>IterateAs Matcher</h2><p>This matcher lets you specify that a method should return an array or an
object implementing <code>\Traversable</code> that iterates just as the argument
you passed to it. <strong>phpspec</strong> matches both the key and the value by
identity (<code>===</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_contain_jane_smith_and_john_smith_in_the_cast</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldIterateAs</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\ArrayIterator</span>([<span style=color:#e6db74>&#39;Jane Smith&#39;</span>, <span style=color:#e6db74>&#39;John Smith&#39;</span>]));
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldYield</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\ArrayIterator</span>([<span style=color:#e6db74>&#39;Jane Smith&#39;</span>, <span style=color:#e6db74>&#39;John Smith&#39;</span>]));
    }
}
</code></pre></div><p>Both of these ways of using the IterateAs matcher are equivalent. There
is no difference in how they work, this lets you choose the one which
makes your specification easier to read.</p><h2 id=iteratelike-matcher>IterateLike Matcher</h2><p>This matcher lets you specify that a method should return an array or an
object implementing <code>\Traversable</code> that iterates equal to the arguments
you passed to it. <strong>phpspec</strong> matches both the key and the element by
value (<code>==</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_contain_jane_smith_and_john_smith_in_the_cast</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldIterateLike</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\ArrayIterator</span>([<span style=color:#e6db74>&#39;Jane Smith&#39;</span>, <span style=color:#e6db74>&#39;John Smith&#39;</span>]));
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldYieldLike</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\ArrayIterator</span>([<span style=color:#e6db74>&#39;Jane Smith&#39;</span>, <span style=color:#e6db74>&#39;John Smith&#39;</span>]));
    }
}
</code></pre></div><p>Both of these ways of using the IterateAs matcher are equivalent. There
is no difference in how they work, this lets you choose the one which
makes your specification easier to read.</p><h2 id=startiteratingas-matcher>StartIteratingAs Matcher</h2><p>This matcher lets you specify that a method should return an array or an
object implementing <code>\Traversable</code> that starts iterating just as the
argument you passed to it. <strong>phpspec</strong> matches both the key and the
value by identity (<code>===</code>).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_contain_at_least_jane_smith_in_the_cast</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldStartIteratingAs</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\ArrayIterator</span>([<span style=color:#e6db74>&#39;Jane Smith&#39;</span>]));
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getCast</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldStartYielding</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>\ArrayIterator</span>([<span style=color:#e6db74>&#39;Jane Smith&#39;</span>]));
    }
}
</code></pre></div><p>Both of these ways of using the StartIteratingAs matcher are equivalent.
There is no difference in how they work, this lets you choose the one
which makes your specification easier to read.</p><h2 id=stringcontain-matcher>StringContain Matcher</h2><p>The StringContain matcher lets you specify that a method should return a
string containing a given substring. This matcher is case sensitive.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_a_title_that_contains_wizard</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTitle</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldContain</span>(<span style=color:#e6db74>&#39;Wizard&#39;</span>);
    }
}
</code></pre></div><h2 id=stringstart-matcher>StringStart Matcher</h2><p>The StringStart matcher lets you specify that a method should return a
string starting with a given substring.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_a_title_that_starts_with_the_wizard</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTitle</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldStartWith</span>(<span style=color:#e6db74>&#39;The Wizard&#39;</span>);
    }
}
</code></pre></div><h2 id=stringend-matcher>StringEnd Matcher</h2><p>The StringEnd matcher lets you specify that a method should return a
string ending with a given substring.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_a_title_that_ends_with_of_oz</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTitle</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldEndWith</span>(<span style=color:#e6db74>&#39;of Oz&#39;</span>);
    }
}
</code></pre></div><h2 id=stringregex-matcher>StringRegex Matcher</h2><p>The StringRegex matcher lets you specify that a method should return a
string matching a given regular expression.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_a_title_that_contains_wizard</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTitle</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldMatch</span>(<span style=color:#e6db74>&#39;/wizard/i&#39;</span>);
    }
}
</code></pre></div><h2 id=inline-matcher>Inline Matcher</h2><p>You can create custom matchers by providing them in <code>getMatchers</code>
method.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_some_specific_options_by_default</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getOptions</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveKey</span>(<span style=color:#e6db74>&#39;username&#39;</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getOptions</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveValue</span>(<span style=color:#e6db74>&#39;diegoholiveira&#39;</span>);
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getMatchers</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>array</span>
    {
        <span style=color:#66d9ef>return</span> [
            <span style=color:#e6db74>&#39;haveKey&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>function</span> ($subject, $key) {
                <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>array_key_exists</span>($key, $subject);
            },
            <span style=color:#e6db74>&#39;haveValue&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>function</span> ($subject, $value) {
                <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>in_array</span>($value, $subject);
            },
        ];
    }
}
</code></pre></div><p>In order to print a more verbose error message your inline matcher
should throw `FailureException`:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e>&lt;?php</span>

<span style=color:#66d9ef>namespace</span> <span style=color:#a6e22e>spec</span>;

<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\ObjectBehavior</span>;
<span style=color:#66d9ef>use</span> <span style=color:#a6e22e>PhpSpec\Exception\Example\FailureException</span>;

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MovieSpec</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>ObjectBehavior</span>
{
    <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>it_should_have_some_specific_options_by_default</span>()
    {
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getOptions</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveKey</span>(<span style=color:#e6db74>&#39;username&#39;</span>);
        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getOptions</span>()<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>shouldHaveValue</span>(<span style=color:#e6db74>&#39;diegoholiveira&#39;</span>);
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getMatchers</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>array</span>
    {
        <span style=color:#66d9ef>return</span> [
            <span style=color:#e6db74>&#39;haveKey&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>function</span> ($subject, $key) {
                <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>array_key_exists</span>($key, $subject)) {
                    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>FailureException</span>(<span style=color:#a6e22e>sprintf</span>(
                        <span style=color:#e6db74>&#39;Message with subject &#34;%s&#34; and key &#34;%s&#34;.&#39;</span>,
                        $subject, $key
                    ));
                }
                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
            }
        ];
    }
}
</code></pre></div></main><nav></nav><footer><ul><li><a href=https://www.github.com/phpspec/phpspec/edit/master/docs/en/cookbook/matchers.md target=_blank>Improve this page</a></li></ul></footer></section></body></html>